(this["webpackJsonpstarter-movie-front-end"]=this["webpackJsonpstarter-movie-front-end"]||[]).push([[0],{34:function(e,t,s){},35:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),r=s(13),i=s.n(r),a=s(5),o=s(0);var l=function(){return Object(o.jsxs)("ul",{className:"nav justify-content-start",style:{padding:"1rem 0 3rem"},children:[Object(o.jsx)("li",{className:"nav-item d-none d-lg-block d-xl-block",children:Object(o.jsx)(a.b,{className:"font-poppins-heading nav-link mx-2 text-light",to:"/",children:Object(o.jsx)("h1",{className:"h5",style:{fontStyle:"italic"},children:"WeLoveMovies"})})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(a.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/movies",children:"All Movies"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(a.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/theaters",children:"All Theaters"})})]})},j=s.p+"static/media/header.c47d8fe5.jpg";var d=function(){const e={background:"linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.7)), url(".concat(j,")"),backgroundPosition:"center",backgroundSize:"100% auto"};return Object(o.jsxs)("div",{className:"jumbotron jumbotron-fluid text-white border-bottom border-dark pt-0",style:e,children:[Object(o.jsx)(l,{}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h1",{className:"display-4",children:"Find your next favorite movie!"}),Object(o.jsxs)("p",{className:"lead",children:[Object(o.jsx)("em",{children:"WeLoveMovies"})," is your source for finding reviews of movies in theatres near you."]})]})]})};var b=function(e){let{error:t}=e;return t&&Object(o.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})};const h="postgresql://development_edhz_user:UZbW9rfoiLxYkjudbQIxRPBK6c1tUC67@dpg-cq5ed3uehbks73bo01sg-a.oregon-postgres.render.com/development_edhz?ssl=true",m=new Headers;async function u(e,t,s){try{const s=await fetch(e,t);if(204===s.status)return null;const c=await s.json();return c.error?Promise.reject({message:c.error}):c.data}catch(c){if("AbortError"!==c.name)throw console.error(c.stack),c;return Promise.resolve(s)}}function x(e){return async t=>{const s="".concat(h,"/movies/").concat(t.movie_id,"/reviews");return t.reviews=await u(s,{headers:m,signal:e},[]),t}}async function O(e){const t=new URL("".concat(h,"/movies?is_showing=true")),s=x(e);return await u(t,{headers:m,signal:e},[]).then((e=>Promise.all(e.map(s))))}async function v(e,t){const s=new URL("".concat(h,"/movies/").concat(e)),c=x(t),n=function(e){return async t=>{const s="".concat(h,"/movies/").concat(t.movie_id,"/theaters");return t.theaters=await u(s,{headers:m,signal:e},[]),t}}(t);return await u(s,{headers:m,signal:t},[]).then(c).then(n)}m.append("Content-Type","application/json");var g=function(){const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(null);Object(c.useEffect)((()=>{n(null);const e=new AbortController;return O(e.signal).then(t).catch(n),()=>e.abort()}),[]);const r=e.map((e=>Object(o.jsxs)("article",{className:"col-sm-12 col-md-6 col-lg-3 my-2",children:[Object(o.jsx)("img",{alt:"".concat(e.title," Poster"),className:"rounded",src:e.image_url,style:{width:"100%"}}),Object(o.jsx)(a.b,{to:"/movies/".concat(e.movie_id),className:"stretched-link text-dark",children:Object(o.jsx)("h3",{className:"font-poppins-heading text-center mt-2",children:e.title})})]},e.movie_id)));return Object(o.jsxs)("main",{className:"container",children:[Object(o.jsx)(b,{error:s}),Object(o.jsx)("h2",{className:"font-poppins",children:"Now Showing"}),Object(o.jsx)("hr",{}),Object(o.jsx)("section",{className:"row",children:r})]})};function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){const t=e.reduce(((e,t)=>e+t.score),0);return Math.round(t/e.length)}return"N/A"}var f=function(e){let{reviews:t=[]}=e;return Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Average Review Rating:"})," ",p(t)]})};var w=function(e){let{movie:t}=e;return Object(o.jsxs)("section",{className:"row mt-4",children:[Object(o.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(o.jsx)("img",{alt:"".concat(t.title," Poster"),className:"rounded",src:t.image_url,style:{width:"100%"}})}),Object(o.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(o.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(o.jsx)("p",{children:t.description}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Runtime:"})," ",t.runtime," minutes"]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(o.jsx)(f,{reviews:t.reviews}),Object(o.jsx)(a.b,{to:"/movies/".concat(t.movie_id),className:"btn btn-primary",children:"See More"})]})]})};var N=function(){const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(null);Object(c.useEffect)((()=>{n(null);const e=new AbortController;return O(e.signal).then(t).catch(n),()=>e.abort()}),[]);const r=e.map((e=>Object(o.jsx)(w,{movie:e},e.movie_id)));return Object(o.jsxs)("main",{className:"container",children:[Object(o.jsx)(b,{error:s}),Object(o.jsx)("h2",{className:"font-poppins",children:"All Movies"}),Object(o.jsx)("hr",{}),Object(o.jsx)("section",{children:r})]})},_=s(2);var y=function(e){let{movie:t}=e;return Object(o.jsxs)("section",{children:[Object(o.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(o.jsx)("p",{children:t.description}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Runtime:"})," ",t.runtime_in_minutes," minutes"]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(o.jsx)(f,{reviews:t.reviews})]})},k=s(15);const R={padding:"0 0px 5px 5px"};var S=function(e){let{review:t,deleteReview:s,setReviewScore:c}=e;const{critic:n}=t;return Object(o.jsxs)("section",{className:"border p-4 mb-4",children:[Object(o.jsxs)("h4",{children:[n.preferred_name," ",n.surname,Object(o.jsxs)("small",{children:[" of ",n.organization_name]})]}),Object(o.jsx)("p",{dangerouslySetInnerHTML:{__html:k.markdown.toHTML(t.content)}}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Rating:"})," ",t.score,Object(o.jsx)("button",{className:"btn btn-link",style:R,onClick:()=>(()=>{const e=t.score+1;e>5||c(t,e)})(),children:"\u2191"}),Object(o.jsx)("button",{className:"btn btn-link",style:R,onClick:()=>(()=>{const e=t.score-1;e<1||c(t,e)})(),children:"\u2193"})]}),Object(o.jsx)("button",{className:"btn btn-danger",onClick:()=>s(t),children:"Destroy Review"})]})};var A=function(e){let{reviews:t=[],deleteReview:s,setReviewScore:c}=e;if(t.length){const e=t.sort(((e,t)=>e.critic.preferred_name.localeCompare(t.critic.preferred_name))).map((e=>Object(o.jsx)(S,{review:e,deleteReview:s,setReviewScore:c},e.review_id)));return Object(o.jsxs)("section",{className:"mt-4",children:[Object(o.jsx)("h3",{children:"Reviews"}),e]})}return null};var C=function(e){let{theater:t}=e;return Object(o.jsx)("article",{className:"col-sm-12 col-md",children:Object(o.jsx)("div",{className:"card",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{children:t.name}),Object(o.jsxs)("address",{children:[t.address_line_1,Object(o.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]})})})};var E=function(e){let{theaters:t=[]}=e;return t.length?Object(o.jsxs)("section",{className:"mt-4",children:[Object(o.jsx)("h4",{children:"Now Showing Here"}),Object(o.jsx)("div",{className:"row",children:t.map((e=>Object(o.jsx)(C,{theater:e},e.theater_id)))})]}):null};var P=function(){const{movieId:e}=Object(_.f)(),[t,s]=Object(c.useState)({}),[n,r]=Object(c.useState)(null);function i(e){r(null);const t=new AbortController;return v(e,t.signal).then(s).catch(r),()=>t.abort()}return Object(c.useEffect)((()=>{i(e)}),[e]),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(b,{error:n}),Object(o.jsxs)("section",{className:"row mt-4",children:[Object(o.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(o.jsx)("img",{alt:"".concat(t.title," Poster"),className:"rounded",src:t.image_url,style:{width:"100%"}})}),Object(o.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(o.jsx)(y,{movie:t}),Object(o.jsx)(E,{theaters:t.theaters}),Object(o.jsx)(A,{reviews:t.reviews,deleteReview:function(e){let{movie_id:t,review_id:s}=e;(async function(e){const t="".concat(h,"/reviews/").concat(e);return await u(t,{method:"DELETE",headers:m},{})})(s).then((()=>i(t)))},setReviewScore:function(e,t){let{movie_id:s,review_id:c}=e;console.log("score",c,t),async function(e,t){const s="".concat(h,"/reviews/").concat(e),c={method:"PUT",headers:m,body:JSON.stringify({data:t})};return await u(s,c,{})}(c,{score:t}).then((()=>i(s)))}})]})]})]})};var L=function(e){let{theater:t}=e;return Object(o.jsx)("article",{className:"col-12 mb-4",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("aside",{className:"col",children:[Object(o.jsx)("h2",{children:t.name}),Object(o.jsxs)("address",{children:[t.address_line_1,Object(o.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]}),Object(o.jsx)("section",{className:"col",children:Object(o.jsx)("div",{className:"row",children:t.movies.map((e=>Object(o.jsx)("div",{className:"col-2",children:Object(o.jsx)(a.b,{to:"/movies/".concat(e.movie_id),children:Object(o.jsx)("img",{alt:"".concat(e.title," Poster"),src:e.image_url,className:"w-100"})})},e.movie_id)))})})]})})};var M=function(){const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(null);Object(c.useEffect)((()=>{n(null);const e=new AbortController;return async function(e){const t=new URL("".concat(h,"/theaters"));return await u(t,{headers:m,signal:e},[])}(e.signal).then(t).catch(n),()=>e.abort()}),[]);const r=e.map((e=>Object(o.jsx)(L,{theater:e},e.theater_id)));return Object(o.jsxs)("main",{className:"container",children:[Object(o.jsx)(b,{error:s}),Object(o.jsx)("h2",{className:"font-poppins",children:"All Theaters"}),Object(o.jsx)("hr",{}),Object(o.jsx)("section",{className:"row",children:r})]})};var T=function(){return Object(o.jsxs)(a.a,{children:[Object(o.jsx)(d,{}),Object(o.jsxs)(_.c,{children:[Object(o.jsx)(_.a,{exact:!0,path:"/",children:Object(o.jsx)(g,{})}),Object(o.jsx)(_.a,{exact:!0,path:"/movies",children:Object(o.jsx)(N,{})}),Object(o.jsx)(_.a,{exact:!0,path:"/movies/:movieId",children:Object(o.jsx)(P,{})}),Object(o.jsx)(_.a,{exact:!0,path:"/theaters",children:Object(o.jsx)(M,{})})]})]})};s(34);i.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(T,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.e5b78eea.chunk.js.map